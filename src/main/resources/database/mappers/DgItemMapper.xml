<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gndg.home.dgItem.DgItemDAO">

	<!-- 상품 수정 -->
	<select id="setUpdateItem">
	SELECT
		I.ITEM_NUM, I.ITEM_NAME, I.CATE_NUM, C.CATE_REF, C.CATE_NAME, ITEM_PRICE, ITEM_STOCK, ITEM_CONTENTS, ITEM_DATE
		FROM ITEM I
			INNER JOIN CATEGORY C 
				ON I.ITEM_NUM = C.CATE_NUM
		WHERE I.ITEM_NUM = #{item_num};
	</select>

	<!-- 상품조회 -->
	<select id="getViewItem" parameterType="DgItemDTO" resultType="DgItemDTO">
		SELECT  *
    		FROM ITEM
    			WHERE ITEM_NUM = #{item_num}
	</select>

	<!-- 상품목록 -->
	<select id="getListItem" resultType="DgItemDTO">
		SELECT ITEM_NUM, CATE_NUM, USER_ID, ITEM_NAME, ITEM_CONTENTS, ITEM_PRICE, ITEM_DATE, ITEM_HIT, ITEM_STOCK, ITEM_YN, CODE
			FROM ITEM
        		ORDER BY ITEM_NUM DESC	
	</select>
	
	<!-- 상품등록 -->
	<insert id="setAddItem" parameterType="DgItemDTO">
		INSERT INTO ITEM(ITEM_NUM, CATE_NUM, USER_ID, ITEM_NAME, ITEM_CONTENTS, ITEM_PRICE, ITEM_DATE, ITEM_HIT, ITEM_STOCK, ITEM_YN, CODE)
		VALUES(ITEM_SEQ.NEXTVAL, #{cate_num}, 'admin', #{item_name}, #{item_contents}, #{item_price}, sysdate, 0, #{item_stock}, 'Y', 2)
	</insert>

	<!-- 카테고리 불러오기 -->
	<select id="getCategory" resultType="CategoryDTO">
		SELECT *
		FROM CATEGORY
		ORDER BY CATE_NUM ASC
	</select>

</mapper>